{% extends "base.html" %}

{% block title %}Профиль - TeamManager{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Профиль</h1>
</div>

<div class="profile-container">
    <div class="profile-card">
        <div class="profile-avatar">{{ user.first_name[0] }}{{ user.last_name[0] }}</div>
        <h2>{{ user.first_name }} {{ user.last_name }}</h2>
        <p class="profile-email">{{ user.email }}</p>
        <span class="badge badge-role">{{ user.role.value }}</span>
    </div>

    <div class="profile-info">
        <h3>Информация</h3>
        <div class="info-grid">
            <div class="info-item">
                <strong>Email:</strong>
                <p>{{ user.email }}</p>
            </div>
            <div class="info-item">
                <strong>Роль:</strong>
                <p>{{ user.role.value }}</p>
            </div>
            <div class="info-item">
                <strong>Команда:</strong>
                <p>{% if user.team %}{{ user.team.name }}{% else %}Нет команды{% endif %}</p>
            </div>
            <div class="info-item">
                <strong>Дата регистрации:</strong>
                <p>{{ user.created_at.strftime('%d.%m.%Y') }}</p>
            </div>
        </div>
    </div>

    <div class="profile-stats">
        <h3>Статистика</h3>
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-number">{{ stats.total_tasks }}</div>
                <div class="stat-label">Всего задач</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ stats.completed_tasks }}</div>
                <div class="stat-label">Завершено</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ stats.total_meetings }}</div>
                <div class="stat-label">Встреч</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{% if stats.avg_score %}{{ "%.1f"|format(stats.avg_score) }}{% else %}—{% endif %}</div>
                <div class="stat-label">Средняя оценка</div>
            </div>
        </div>
    </div>

    <div class="profile-actions">
        <a href="/profile/edit" class="btn btn-primary">Редактировать профиль</a>
        <a href="/profile/password" class="btn">Сменить пароль</a>
    </div>
</div>
{% endblock %}
